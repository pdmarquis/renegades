(function(d){var e=false,c=false;var b={isUrl:function(g){var f=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");if(!f.test(g)){return false}else{return true}},loadContent:function(f,g){f.html(g)},addPrefix:function(f){var g=f.attr("id"),h=f.attr("class");if(typeof g==="string"&&""!==g){f.attr("id",g.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1"))}if(typeof h==="string"&&""!==h&&"sidr-inner"!==h){f.attr("class",h.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1"))}f.removeAttr("style")},execute:function(l,g,u){if(typeof g==="function"){u=g;g="sidr"}else{if(!g){g="sidr"}}var f=d("#"+g),n=d(f.data("body")),m=d("html"),p=f.outerWidth(true),i=f.data("speed"),q=f.data("side"),s=f.data("displace"),j=f.data("onOpen"),r=f.data("onClose"),o,k,h,t=(g==="sidr"?"sidr-open":"sidr-open "+g+"-open");if("open"===l||("toggle"===l&&!f.is(":visible"))){if(f.is(":visible")||e){return}if(c!==false){a.close(c,function(){a.open(g)});return}e=true;if(q==="left"){o={left:p+"px"};k={left:"0px"}}else{o={right:p+"px"};k={right:"0px"}}if(n.is("body")){h=m.scrollTop();m.css("overflow-x","hidden").scrollTop(h)}if(s){n.addClass("sidr-animating").css({width:n.width(),position:"absolute"}).animate(o,i,function(){d(this).addClass(t)})}else{setTimeout(function(){d(this).addClass(t)},i)}f.css("display","block").animate(k,i,function(){e=false;c=g;if(typeof u==="function"){u(g)}n.removeClass("sidr-animating")});j()}else{if(!f.is(":visible")||e){return}e=true;if(q==="left"){o={left:0};k={left:"-"+p+"px"}}else{o={right:0};k={right:"-"+p+"px"}}if(n.is("body")){h=m.scrollTop();m.removeAttr("style").scrollTop(h)}n.addClass("sidr-animating").animate(o,i).removeClass(t);f.animate(k,i,function(){f.removeAttr("style").hide();n.removeAttr("style");d("html").removeAttr("style");e=false;c=false;if(typeof u==="function"){u(g)}n.removeClass("sidr-animating")});r()}}};var a={open:function(f,g){b.execute("open",f,g)},close:function(f,g){b.execute("close",f,g)},toggle:function(f,g){b.execute("toggle",f,g)},toogle:function(f,g){b.execute("toggle",f,g)}};d.sidr=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="function"||typeof f==="string"||!f){return a.toggle.apply(this,arguments)}else{d.error("Method "+f+" does not exist on jQuery.sidr")}}};d.fn.sidr=function(h){var l=d.extend({name:"sidr",speed:200,side:"left",source:null,renaming:true,body:"body",displace:true,onOpen:function(){},onClose:function(){}},h);var g=l.name,k=d("#"+g);if(k.length===0){k=d("<div />").attr("id",g).css("display","none").appendTo(d("body"))}k.addClass("sidr").addClass(l.side).data({speed:l.speed,side:l.side,body:l.body,displace:l.displace,onOpen:l.onOpen,onClose:l.onClose});if(typeof l.source==="function"){var f=l.source(g);b.loadContent(k,f)}else{if(typeof l.source==="string"&&b.isUrl(l.source)){d.get(l.source,function(n){b.loadContent(k,n)})}else{if(typeof l.source==="string"){var m="",j=l.source.split(",");d.each(j,function(n,o){m+='<div class="sidr-inner">'+d(o).html()+"</div>"});if(l.renaming){var i=d("<div />").html(m);i.find("*").each(function(o,p){var n=d(p);b.addPrefix(n)});m=i.html()}b.loadContent(k,m)}else{if(l.source!==null){d.error("Invalid Sidr Source")}}}}return this.each(function(){var o=d(this),n=o.data("sidr");if(!n){o.data("sidr",g);if("ontouchstart" in document.documentElement){o.bind("touchstart",function(p){var q=p.originalEvent.touches[0];this.touched=p.timeStamp});o.bind("touchend",function(p){var q=Math.abs(p.timeStamp-this.touched);if(q<200){p.preventDefault();a.toggle(g)}})}else{o.click(function(p){p.preventDefault();a.toggle(g)})}}})}})(jQuery);